# DefectFlow 결함 관리 시스템 기능 명세서 (Functional Specification)

## 1. 개요
본 문서는 DefectFlow 결함 관리 시스템의 주요 기능 요구 사항 및 구현 내용을 정의합니다. 본 시스템은 클라우드 네이티브 환경(Supabase)을 기반으로 결함의 생명주기를 실시간으로 관리하고, 테스트 자동화 연동을 지원하는 협업 플랫폼입니다.

## 2. 시스템 아키텍처
*   **Frontend**: Vanilla JS (ES6+), HTML5, CSS3, Chart.js (통계 시각화)
*   **Backend (BaaS)**: Supabase (PostgreSQL, Auth, Storage)
*   **Security**: Client-side BCrypt.js (암호화 해싱)
*   **외부 연동 기술**: html2canvas (실시간 화면 캡처), URL Hash Routing

## 3. 주요 기능 명세

### 3.1 권한 관리 및 보안 (Authentication & RBAC)
*   **보안 로그인**: 시스템 접근 전 사용자 인증 필수. 비밀번호는 BCrypt로 암호화되어 관리됨.
*   **역할 정의**: '테스터', '조치자', '관리자(Admin)' 역할 기반 제어.
    *   **관리자 전용**: 사용자 관리, 환경 설정, 시스템 데이터 제어.
    *   **조치자**: 결함 상태 변경 및 조치 결과 입력 권한.
*   **세션 유지 및 리다이렉트**: 로그인 세션은 LocalStorage를 통해 유지되며, 비로그인 시 시도한 원래 페이지(`returnTo`)로 로그인 후 자동 복구됨.
*   **비밀번호 초기화 관리**: `needs_pw_reset` 플래그가 설정된 사용자의 경우 최초 로그인 시 비밀번호 변경 강제.

### 3.2 결함 등록 및 통합 연동
*   **결함 등록**: 테스트 구분, 제목, 심각도, 우선순위, 재현 단계, 메뉴/화면명 등 상세 정보 수집.
*   **실시간 화면 캡처**: 연동 위젯 클릭 시 브라우저 화면을 즉시 캡처하여 증적으로 자동 첨부.
*   **테스트 벤치 연동 (Standalone Mode)**:
    *   외부 웹사이트에서 버튼 하나로 결함 리포트 호출 가능.
    *   사이드바가 제거된 전용 폼(Pop-up) 모드 지원.
    *   현재 페이지의 URL, 제목, UserAgent 정보 자동 수립 및 전송.
*   **이미지 동기화**: 결함 스크린샷은 Supabase Storage에 자동 업로드되며, 공용 URL을 통해 이력 관리됨.

### 3.3 대시보드 (Dashboard)
*   **실시간 통계**: Supabase 실시간 데이터를 기반으로 전체 건수, 진행 중, 조치 완료, 크리티컬 결함수 요약 표시.
*   **데이터 시각화**: 결함 상태별 비중을 가로 스택 바 차트로 표시하여 조치 진척도 파악 용이.
*   **최근 활동**: 최신 등록된 결함 목록 20개를 대시보드 하단에 실시간 노출.

### 3.4 결함 조회 및 데이터 분석
*   **고급 목록 조회**: 
    *   데이터 페이징 지원 (20, 40, 50개 단위 가변 설정).
    *   심각도, 상태, 등록자, 기간 등 다중 복합 필터링 기능.
*   **데이터 추출 (CSV Export)**: 검색 및 필터링된 결과물을 CSV 형식으로 추출. 엑셀 호환성을 위한 UTF-8 BOM(Byte Order Mark) 처리 포함.

### 3.5 시스템 설정 및 운영 표준
*   **운영 표준 준수**: 모든 기능은 '스마트 작업 3대 원칙(영향도 분석, 선제적 대응, First-Time-Right)'을 준수하여 개발 및 운영됨.
*   **사용자 관리**: 담당자별 역할 부여, 소속 관리 및 계정 상태(사용/중지) 제어 기능.

---
**작성일**: 2026-02-19
**버전**: v2.0 (Cloud Native & Smart Working Standard 적용본)
**상태**: Stable (운영 중)
